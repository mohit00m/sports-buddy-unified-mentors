<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Sports Buddy ‚Äì Connect & Play</title>
  <meta name="description" content="Connect with sports lovers near you and create exciting sports events.">

  <link rel="stylesheet" href="css/style.css">
</head>
<body>


  <!-- üîµ NAVBAR -->
  <nav class="navbar">
    <div class="logo">üèÜ Sports Buddy</div>
    <div id="navLinks">
      <a href="register.html">Register</a>
      <a href="login.html">Login</a>
    </div>
  </nav>

  <!-- üü¢ HERO SECTION -->
  <section class="hero">
    <h1>Find & Create Sports Events Near You</h1>
    <p>Join your local sports community and stay active!</p>
    <button id="exploreBtn">Explore Events</button>
  </section>

  <!-- üü° EVENTS SECTION -->
  <section class="events-section">
    <h2>Upcoming Events</h2>
    <div id="eventsContainer" class="events-grid">
      <!-- Events will load here -->
    </div>
  </section>

  <!-- üîê Firebase Script -->
  <script type="module">
    import { auth, db } from "./js/firebase-config.js";
    import { onAuthStateChanged } 
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { collection, getDocs } 
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const navLinks = document.getElementById("navLinks");
    const eventsContainer = document.getElementById("eventsContainer");

    // üîÑ Auth State Listener
    onAuthStateChanged(auth, async (user) => {

      if (user) {
        navLinks.innerHTML = `
          <a href="dashboard.html">Dashboard</a>
          <a href="#" id="logoutBtn">Logout</a>
        `;

        document.getElementById("logoutBtn").onclick = async () => {
          await auth.signOut();
          window.location.reload();
        };

        loadEvents();

      } else {
        eventsContainer.innerHTML = `
          <p style="color:gray;">Login to view upcoming events.</p>
        `;
      }
    });

    // üì¶ Load Events
    async function loadEvents() {
      eventsContainer.innerHTML = "";

      const snapshot = await getDocs(collection(db, "events"));

      if (snapshot.empty) {
        eventsContainer.innerHTML = "<p>No events available.</p>";
        return;
      }

      snapshot.forEach(doc => {
        const data = doc.data();

        eventsContainer.innerHTML += `
          <div class="event-card">
            <h3>${data.name}</h3>
            <p><strong>City:</strong> ${data.city}</p>
            <p><strong>Area:</strong> ${data.area}</p>
            <p><strong>Time:</strong> ${data.time}</p>
          </div>
        `;
      });
    }

    // üéØ Explore Scroll
    document.getElementById("exploreBtn").onclick = () => {
      document.querySelector(".events-section").scrollIntoView({
        behavior: "smooth"
      });
    };

  </script>
<div id="toast-container"></div>
<div id="loader" class="loader hidden"></div>
</body>
</html>
